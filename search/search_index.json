{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>SinusBot is a MusicBot that will let you listen to music together with your friends on either TeamSpeak 3 or Discord. But it doesn't stop there - there's a lot of user-made scripts that can let SinusBot manage your Server and enhance the experience of your users in several ways.</p> <p>You and your friends can control the bot either through the included web interface or via commands through TeamSpeak 3 or Discord.</p>"},{"location":"#what-you-need","title":"What you need","text":"<p>The SinusBot can run on either Windows or Linux, but only on the 64bit versions of those operating systems.</p> <p>Most users usually want their bot to run 24/7 and thus will rent a Linux server on the internet and install it there. If you don't know how to handle a Linux server, you can also have your SinusBot managed by one of our partners for a little fee and just focus on the functionality.</p>"},{"location":"configuration/","title":"Configuration","text":"<p>Usually you don't need to edit too much in the <code>config.ini</code> file as most of the important stuff can be managed via the web interface. Some functionality however can be enabled or tweaked in here. Please be careful with the settings and should you encounter problems, always make sure that you tell us what you changed in here!</p>"},{"location":"configuration/#general","title":"General","text":"Field Value Default EnableDebugConsole (internal use only) true EnableLocalFS (internal use only) false EnableProfiler (internal use only; deprecated) false EnableWebStream allow the bot to export the audio stream via http or icecast false ExternalFileBase a path where an external music library is stored DataDir This can be used to specify the data directory the bot should use. ./data relative to bot Hostname Hostname to use for the certificate when UseSSL is enabled InstanceActionLimit number of http requests / actions (per instance and second) before a limit will prevent further actions 6 IsProxied if enabled, the bot will trust proxied headers and use the IPs from there false License one or more valid licenses LicenseKey host specific license key; used for license-requests. Don't change it! ListenHost IP-address the bot should listen on 0.0.0.0 (listen on all interfaces/IP-addresses) ListenPort Port the bot should listen on 8087 LocalPlayback (internal use only) false LogFile if specified, output will be logged to this file instead of stdout MaxBulkOperations number of entries that can be moved with one operation (add to playlist, move to folder and such) 300 LogLevel verbosity of the log 3 (errors and warnings) Pragma (caution!) used to override database version; DO NOT SET! RunAsGroup gid to use for privilege drop 0 RunAsUser uid to use for privilege drop 0 SampleInterval DON'T TOUCH, WILL BREAK THINGS! SSLCertFile certificate to use for SSL connections SSLKeyFile private key to use for SSL connections Token random security token, generated on first start; to change, remove it TS3Path Path to the TeamSpeak 3 Client executable UploadLimit maximum number of bytes a file is allowed to have when uploading 83886080 (80M) UseSSL if set to true, the bot will only accept https-connections; Hostname MUST be specified false YoutubeDLPath Path the the youtube-dl executable youtube-dl"},{"location":"configuration/#ts3","title":"TS3","text":"Field Value Default AvatarMaxWidth if set, all uploaded avatars will be limited (resized) to this value 0 (no limit) AvatarMaxHeight if set, all uploaded avatars will be limited (resized) to this value 0 (no limit) AllowGIF allows avatar to be a GIF"},{"location":"configuration/#youtubedl","title":"YoutubeDL","text":"Field Value Default BufferSize number of bytes to use for buffering (useful to tune on slow connections) CacheStreamed if streaming via youtube-dl, enabling this will cause the streams to get stored inside the cache directory; please be aware that you have to delete the cache files manually (that's safe to do) ChunkSize Size in bytes that will determine count of simultaneous download streams (limited by MaxSimultaneousChunkDownloads) 3 MB MaxDownloadSize maximum size of files to download via youtube-dl MaxDownloadRate if you want to slow down youtube-dl to prevent traffic spikes, use this MaxSimultaneousChunkDownloads overall limit of simultaneous download streams per job 10 TimeoutMultiDownloader timeout (in seconds) for chunks of a multi stream download 5 Minutes TimeoutSingleDownloader time (in seconds) before a downloader cancels 30 Minutes"},{"location":"configuration/#plugins","title":"Plugins","text":"<p>This section will hold configuration values for used plugins. Please see the manual of the plugin to use for what settings are required.</p>"},{"location":"configuration/#scripts","title":"Scripts","text":"Field Value Default AllowReload Enables a script function that allows hot script reloading (added scripts will still need a restart of the bot) false DevMode If set to true (default is false), all scripts will be reloaded once a script file gets changed. false"},{"location":"configuration/#speechrecognition","title":"SpeechRecognition","text":"Field Value Default Enable Enable speech recognition; requires additional files to work false"},{"location":"configuration/#xserver","title":"XServer","text":"Field Value Default Delay Throttle XServer events to save CPU cycles (DON'T CHANGE) 0 Debug (internal only) false"},{"location":"configuration/#dav-deprecated","title":"DAV (deprecated)","text":"Field Value Default Enable Enables serving the music files via DAV backend; experimental; deprecated false"},{"location":"configuration/#ffmpeg","title":"FFmpeg","text":"Field Value Default UserAgent Can be used to replace the default user-agent header FFmpeg uses"},{"location":"licenses/","title":"Licenses","text":"<p>Please note the following restrictions</p> <p>Licenses are only available for the Linux version of the bot. Licenses are only available for TeamSpeak and not Discord. Private use only, see Disclaimer.</p> <p>So you own a large server and two instances are not enough for you? For this case we're handing out free extended licenses which come with 4 more instances by default, so you've got a total of 6.</p>"},{"location":"licenses/#how-to-get-a-free-extended-license","title":"How to get a free extended license?","text":"<p>We issue approx. one of those licenses per day (that's about 30 per month) but as this is a manual process, we do it in batches every couple of days. You can apply for such a license (if one is available) at our License Page. If you've successfully committed the request, your license will be issued with the next batch. Please make sure to input the correct information as you would have to request a new license otherwise.</p>"},{"location":"licenses/#but-all-free-licenses-have-been-taken-is-there-another-way-to-obtain-one","title":"But all free licenses have been taken. Is there another way to obtain one?","text":"<p>We do have a \"Donor\" group on our forums that you will get automatically if you donate. With this group, the License Page will directly be open to you and you can request a license right away. However, please be aware that your license will not be issued directly but with the next batch (see above).</p>"},{"location":"licenses/#how-long-does-it-take-for-the-license-to-be-approved","title":"How long does it take for the license to be approved?","text":"<p>As mentioned above, licenses are done in batches every couple of days. It usually takes between two days and one week.</p>"},{"location":"licenses/#how-long-is-such-a-license-valid","title":"How long is such a license valid?","text":"<p>A license will also be valid for at least a major release (e.g. 2.0 could require a new license compared to 1.0). We currently don't have plans to invalidate any license given out before 1.0 with the release of 1.0.</p> <p>Licenses are not bound to the TeamSpeak-Server UID nor the IP address anymore; the license is still valid even if they change.</p>"},{"location":"licenses/#how-do-i-install-the-license","title":"How do I install the license?","text":"<p>Once you've received a license you just have to download the <code>private.dat</code> file from the License Page and save/copy it into the same folder the bot is installed in (normally that should be in <code>/opt/sinusbot/</code>). After restarting the SinusBot the new instances will appear automatically.</p> <p>If no instances appear afterwards then you did something wrong. Make sure that...</p> <ul> <li><code>private.dat</code> is in the directory where the SinusBot is installed (typically <code>/opt/sinusbot/</code> if you followed our guide or used the installer)</li> <li><code>private.dat</code> is owned and readable by the SinusBot user (<code>chown sinusbot:sinusbot /opt/sinusbot/private.dat</code>)</li> <li><code>private.dat</code> was uploaded correctly</li> </ul>"},{"location":"licenses/#disclaimer","title":"Disclaimer","text":"<p>Every request will be checked manually and we reserve the right to deny requests without further notice (e.g. in case of abuse). We also reserve the right to discontinue this service or change the terms at any time.</p> <p>Whether you use a SinusBot license or not, the license agreement applies in any case (see <code>Settings -&gt; Info -&gt; About</code> in your SinusBot web-interface).</p> <p>You may NOT redistribute this software or use this software commercially without prior written permission from the author. See FAQ for more information.</p>"},{"location":"locales/","title":"Localize the SinusBot","text":"<p>Before you begin you may check the resources if there already exists a translation. \\ Is there an outdated translation and the author does not answer your request? Report the translation on the forums. </p> <p>Just follow these steps:</p> <ul> <li>Make sure you have a folder called data/locales within in your SinusBot directory</li> <li>Create a new file called ru.json (if you want to create a Russian translation for example) with the following contents: <code>{\"__name\": \"Russian\", \"__code\": \"ru-RU\"}</code></li> <li>Open up the web-interface of the bot and navigate to your personal settings</li> <li>Choose Russian as your language</li> <li>Then click on \"edit\" behind the language selection</li> <li>Fill all the text boxes next to the phrases you would like to translate</li> <li>Hit \"Export\" at the bottom of the page</li> <li>Copy the contents of the export box to your ru.json</li> <li>Done.</li> </ul> <p>The translation interface will highlight untranslated content in yellow and phrases that have not been saved yet in violet.</p> <p>We're giving out extended licenses and access to pre-releases to everyone who contributes a lot or even maintains a translation. ;-)</p>"},{"location":"scripts/","title":"Using &amp; creating Scripts","text":"<p>Your bot can be extended by installing scripts from other users or by writing and activating your own scripts. Such scripts can react on several events and control how the bot should react to them.</p> <p>This can be a simple 'Hello' response when someone writes 'hello' to the bot or a pretty detailed leveling/XP system where the bot tracks the online time of each user. You can find many scripts from other users here.</p> <p>The language the scripts have to be in is JavaScript (ECMAScript Version 5). Since version 1.0 you can now also use newer ES6 features.</p> <p>The full API documentation of the API that is available to you can be found here.</p>"},{"location":"scripts/#how-to-install-a-script","title":"How to install a script?","text":"<p>When you download scripts manually, you should get files that end with .js. Copy those files into the scripts folder within the installation directory.</p> <p>A bot restart is required whenever you add or remove a script manually.</p> <p>Should you have downloaded a zip/rar or whatever file, make sure to unpack it first.</p> <p>Some scripts also come with more files than just the main script file. In such cases make sure you copy them exactly in the same structure as you've downloaded them (keeping all folders that came with the script). This is usually true for scripts that come with their own web interface.</p>"},{"location":"scripts/#writing-a-script","title":"Writing a script","text":"<p>So you've searched for a script and found nothing that fully suits you, right? The best way to get started with writing a script is usually to have a look at other scripts first and try to understand how they work. If you for example want to have a custom welcome script, have a look at how the existing ones work and make slight adjustments instead of directly writing it from scratch.</p> <p>The source code of scripts should usually be readable so you can extend / modify them. Should you plan to publish changes to another script however, make sure you contact the original author and ask for permission.</p>"},{"location":"scripts/#writing-a-script-from-scratch","title":"Writing a script from scratch","text":""},{"location":"scripts/#basic-structure-and-manifest","title":"Basic structure and manifest","text":"<p>Every script must register itself using the <code>registerPlugin</code> function. This function takes two arguments:</p> <ul> <li>the manifest as an object</li> <li>the setup function of your script</li> </ul> <p>First, let's see what a manifest consists of. The manifest will determine which features are available to the script and also contain metadata and variables that will be shown in the web interface. It's also used to make sure the script works with the current version of the bot.</p> <pre><code>registerPlugin({\nname: 'Demo Script',\nversion: '1.0',\ndescription: 'This example actually does nothing',\nauthor: 'your name &lt;your-email@example.com&gt;',\nvars: [],\nautorun: true\n}, function(sinusbot, config) {\n...\n});\n</code></pre>"},{"location":"scripts/#mandatory-fields","title":"Mandatory fields","text":""},{"location":"scripts/#name-string","title":"name (string)","text":"<p>The name field should contain a short name of your script.</p>"},{"location":"scripts/#author-string","title":"author (string)","text":"<p>Put your name and your email address in here in the form of <code>your name &lt;your-email@example.com&gt;</code></p>"},{"location":"scripts/#description-string","title":"description (string)","text":"<p>This should contain a longer description - tell the user what exactly your script does.</p>"},{"location":"scripts/#version-string","title":"version (string)","text":"<p>Start with something like 1.0 and increase it with every release.</p>"},{"location":"scripts/#optional-fields","title":"Optional fields","text":""},{"location":"scripts/#autorun-bool","title":"autorun (bool)","text":"<p>Set to true, if you want the script to be run on every instance, without the option to disable it.</p>"},{"location":"scripts/#backends-string","title":"backends ([]string)","text":"<p>Per default, scripts will only be available on TS3 instances. If your script supports Discord (or in the future maybe other backends) as well, you have to specify this explicitly by setting this variable to an array containing all backends like so: <code>backends: [\"ts3\", \"discord\"]</code></p>"},{"location":"scripts/#enableweb-bool","title":"enableWeb (bool)","text":"<p>If your script required own web content, you can set enableWeb to true and put files into the ./scripts/scriptname/html directory. After restart, the script title will be clickable and lead to an index.html inside that html-directory you just created.</p> <p>From there you have access to the localStorage variables containing the login and may communicate with the bot api from your own pages.</p>"},{"location":"scripts/#engine-string","title":"engine (string)","text":"<p>Sets the required engine version (bot version). This uses Semantic Versioning. Example: <code>&gt;= 0.9.16</code></p>"},{"location":"scripts/#hidden-bool","title":"hidden (bool)","text":"<p>Hides the script from the settings page. Should be used together with <code>autorun</code>.</p> <p>Hidden scripts can not have variables (vars), since they'd never be shown and thus not configurable.</p>"},{"location":"scripts/#requiredmodules-string","title":"requiredModules ([]string)","text":"<p>Using this, you can define which restricted modules the script wants to use. The script has to be re-enabled by the user if the required modules change. This field is mandatory if you use any restricted module from version 1.0 onward.</p>"},{"location":"scripts/#vars-array","title":"vars (array)","text":"<p>This is probably the most complex parameter as this defines the configuration interface that will be shown on the web interface of the bot.</p> <p>Current available variable types:</p> Type Input string Show a regular input element where the user can enter some text password like string but doesn't display the text you've entered strings set multiple strings multiline this will display a text area where the user can enter several lines of text number Show a regular input element, but only accept numeric input from the user track %%Show an input where the user can search and specify a track that has been uploaded to the bot - the config variable will later on contain an object like this: { \"url\": \"track://uuid\", \"title\": \"A short title of the track\" } %% tracks select multiple tracks channel If the bot is connected, this displays a channel selector. The config variable will later on hold the channel-id of the selected channel select this will display a select box. All options need to specified in an array called options and the config value will later on hold the index to the selected option. checkbox this will display a checkbox array this allows the user to add an unspecified amount of items <p>Example of the string type usage:</p> <pre><code>{\nname: 'ExampleName',\ntitle: 'message type',\ntype: 'string',\nplaceholder: 'Some example placeholder'\n}\n</code></pre> <p>Example of the select type usage:</p> <pre><code>{\nname: 'fooType',\ntitle: 'Variations of foobar',\ntype: 'select',\noptions: ['Foo', 'Bar', 'Foobar', 'Barfoo']\n}\n</code></pre> <p>Example of the condition type with the above options example:</p> <pre><code>{\nname: 'fooSwitch',\ntitle: 'Selected fooType',\ntype: 'select',\nconditions: [{        //make a field visible or invisible in the config with conditions\nfield: 'fooType', //this will tell to use the config field with the name \"fooType\"\nvalue: 2,         //this will tell to use the 3rd index of the options of the selected type in this case \"Foobar\"\n}]\n}\n</code></pre> <p>You can print these values in the log by using:</p> <pre><code>engine.log(config.ExampleName);\nengine.log(config.fooType);\n</code></pre>"},{"location":"scripts/#voicecommands-string","title":"voiceCommands ([]string)","text":"<p>This parameter is only used for the speech recognition feature and may contain one or more strings that are to be detected for the given script. Note that the speech recognition only works with licensed instances. You can find more details on how to use it here.</p>"},{"location":"scripts/#the-setup-function","title":"The Setup-Function","text":"<p>Following the manifest, you hand over a function to registerPlugin that will be called upon activation with two or more parameters. The first one, <code>sinusbot</code>, can be ignored if you use the new scripting engine. The second one will hold the configuration of the plugin that the user set from within the web interface (given you have added anything to the <code>vars</code> field of your script manifest).</p> <p>Use this function to setup event listeners and do stuff on initialization.</p> <p>Example</p> <pre><code>registerPlugin({\n...\n}, function(sinusbot, config) {\nvar event = require('event');\nevent.on('chat', function(chatEvent) {\n// Do something...\n});\n});\n</code></pre> <p>As said, the function will get called once the script gets activated either by enabling it in the web interface or when autorun is enabled. In this example an event handler is installed that will be called whenever a chat message has been sent.</p>"},{"location":"speechrecognition/","title":"Speech Recognition","text":"<p>Speech Recognition is not very reliable and currently only works on TeamSpeak.</p> <p>This is a little tutorial on how to use speech recognition. The feature is still highly experimental and will cause increased CPU &amp; RAM usage. I've tried to make it so it only activates if it is really necessary.</p> <p>Discuss this feature on the forums.</p>"},{"location":"speechrecognition/#requirements","title":"Requirements","text":"<ul> <li>you need at least SinusBot version 0.13.37</li> <li>you will need to provide the commands that should be recognized beforehand for now</li> <li>there is no continuous recognition</li> <li>only 3 speakers will be recognized simultaneously, additional speakers will be ignored until one of the initial 3 speakers will stop speaking; in most cases that is more than enough</li> <li>speech recognition will only work on licensed instances for now</li> <li>TS3 only</li> </ul>"},{"location":"speechrecognition/#preparation","title":"Preparation","text":"<ul> <li>set <code>Enable = true</code> in section <code>[SpeechRecognition]</code> of the config.ini</li> <li>Download https://www.sinusbot.com/pre/speech.tar.bz2</li> <li>Extract that file to the same directory as your SinusBot (so you will have a new folder speech inside the SinusBot directory)</li> <li>Create a script that uses the speech recognition engine</li> <li>Restart the bot</li> </ul>"},{"location":"speechrecognition/#code-example","title":"Code Example","text":"<pre><code>registerPlugin({\nname: 'Speech Recognition Demo',\nversion: '1.0',\ndescription: 'This is a simple script that will stop playback when you say \"stop\"',\nauthor: 'Michael Friese &lt;michael@sinusbot.com&gt;',\nvars: [],\nvoiceCommands: ['stop']\n}, function(sinusbot, config) {\nvar event = require('event');\nvar engine = require('engine');\nvar audio = require('audio');\nvar media = require('media');\n\naudio.setAudioReturnChannel(2);\n\nevent.on('speech', function(ev) {\nif (ev.text == 'stop') {\nengine.log('Stopping playback on behalf of client ' + ev.client.nick());\nmedia.stop();\n} else {\nengine.log(ev.client.nick() + ' just said ' + ev.text);\n}\n});\n});\n</code></pre> <p>So it's pretty simple: you register some voiceCommands in the plugins' manifest. Once one of the registered commands is recognized, the speech event gets triggered with an object containing the clientId and the recognized command (a full client object will be added later on).</p> <p>Important: Only words that are inside the ./speech/dict file will be recognized. It already contains many english words and their phonetic \"translation\". If you need words that are not in there, you have to add them (and the translation) manually before you can use them.</p> <p>In most simple cases it works well enough, so don't try to recognize full sentences but focus on simple commands. Also, you might want to let the commands start with a word like \"bot\", so that you don't trigger things by accident ;)</p>"},{"location":"tts/","title":"Text-to-Speech","text":"<p>Since version 1.0, SinusBot has two options for you to use Text-to-Speech. You can either</p> <ul> <li>have the bot use an online service to do the speech synthesis or</li> <li>install some libraries from the Chromium project to generate speech on your computer/server</li> </ul> <p>Both come with advantages and disadvantages - using an online service will most likely generate some cost, while using your server to generate voice will consume quite some CPU power.</p>"},{"location":"tts/#using-an-online-service","title":"Using an online service","text":"<p>To let your bot speak via an online service, you need to register with such a service and get a valid URL (link) that the bot can use to do the actual conversion.</p> <p><code>Settings -&gt; Instance Settings</code> has got a field called <code>TTS-Url</code> where you can enter such a URL.</p> <p>To make this actually work, you have to replace the parameter that contains the text to <code>__TEXT</code> and the locale (if that can be configured via the service) to <code>__LOCALE</code>.</p> <p>If you are using the locale feature, please also provide the default locale in the appropriate field.</p> <p>Afterwards click <code>Save changes</code>.</p> <p>Hit <code>Alt+S</code> in the bot interface to run a test. If everything was successful, you should hear the bot saying what you entered after a short delay.</p> <p>Given you have a tts provider that handed you an URL in the form of</p> <pre><code>http://a-great-tts-provider.com/doTTS?text=Test&amp;locale=en\n</code></pre> <p>you will have to replace the \"Test\" in the URL with <code>__TEXT</code> and that \"en\" with <code>__LOCALE</code>, so that it looks like</p> <pre><code>http://a-great-tts-provider.com/doTTS?text=__TEXT&amp;locale=__LOCALE\n</code></pre> <p>See the [[https://forum.sinusbot.com/threads/text-to-speech-apis-for-sinusbot.500|forums]] for a list of providers known to support this kind of URLs.</p>"},{"location":"tts/#installing-libraries-from-the-chromium-project","title":"Installing libraries from the Chromium project","text":"<p>These are basic instructions for Linux. You need at least SinusBot 1.0 for this to work.</p> <ul> <li>Download and install the library and the voices</li> </ul> <pre><code>cd /opt/sinusbot/tts\nwget https://chromium.googlesource.com/chromiumos/platform/assets/+archive/master/speech_synthesis/patts.tar.gz\ntar -xzf patts.tar.gz\nrm patts.tar.gz\nunzip tts_service_x86_64.nexe.zip\n</code></pre> <p>If the last command fails, you probably need to install unzip first. On Debian/Ubuntu this can be done with <code>apt install unzip</code>.</p> <p>Afterwards, edit your <code>config.ini</code> to contain the following:</p> <pre><code>[TTS]\nEnabled = true\n\n[[TTS.Modules]]\nLocale = \"en-US\"\nFilename = \"voice_lstm_en-US.zvoice\"\nPipelineFile = \"voice_lstm_en-US/sfg/pipeline\"\nPrefix = \"voice_lstm_en-US/sfg/\"\nInstances = 2\n\n[[TTS.Modules]]\nLocale = \"de-DE\"\nFilename = \"voice_lstm_de-DE.zvoice\"\nPipelineFile = \"voice_lstm_de-DE/nfh/pipeline\"\nPrefix = \"voice_lstm_de-DE/nfh/\"\nInstances = 2\n</code></pre> <p>You can get the proper settings for the PipelineFile and Prefix parameters from the corresponding .js files. Some voices (those that have files beginning with remote_) need to be downloaded separately first.</p> <p>The <code>Instances</code> parameter limits the number of concurrent synthesis processes - each of those consumes about 40-100 MB RAM and some CPU cycles. <code>Locale</code> is the locale parameter that is actually used by the bot.</p>"},{"location":"whatsnew/","title":"What is new?","text":""},{"location":"whatsnew/#version-10","title":"Version 1.0","text":"<p>This entry might change until the 1.0 version has become stable.</p>"},{"location":"whatsnew/#scripting-introducing-v8","title":"Scripting: Introducing v8","text":"<p>The scripting engine has been changed to v8 - that's the engine that also powers the Chrome browser and node.js. The change will bring many advantages such as ES6 compatibility and an increased control over the resources used by it.</p> <p>This comes with a couple of changes that script authors need to adapt their scripts to. More info can be found in the changelog of Alpha 1.</p> <p>For users of scripts, it has been made easier to grant a script permission to use restricted modules. When previously you had to edit your config.ini to specifically allow a script to access a database or the filesystem, you can now view the required privileges of a script and accept them automatically when you activate it - just like you do with apps on your phone. Please be careful when installing scripts, especially when they want to use the restricted modules.</p>"},{"location":"whatsnew/#external-file-support","title":"External File Support","text":"<p>With version 1.0 you can store files outside of the bot itself and have the bot \"import\" and use them on-the-fly. This means that if you already have your music collection on the server, you don't need to manually import it into the bot anymore. Or if you want to use (S)FTP to manage your files, you can use that as well. Just add or modify the <code>ExternalFileBase</code> in your config.ini to point to your music directory.</p>"},{"location":"whatsnew/#integrated-text-to-speech-environment","title":"Integrated Text-to-Speech environment","text":"<p>We've integrated the Native Client functionality from the Chromium project into the bot - that means that you can use the same offline TTS engine you probably know from the Chrome browser or your Android phone. More info on that can be found here.</p>"},{"location":"whatsnew/#better-support-for-discord","title":"Better support for Discord","text":"<p>The Discord backend has also seen several of additions - you can for example now bind server roles to SinusBot accounts just like you can bind them to server groups on TeamSpeak.</p>"},{"location":"youtube-dl/","title":"youtube-dl","text":"<p>The bot can use youtube-dl to download media files from several supported websites.</p>"},{"location":"youtube-dl/#usage","title":"Usage","text":"<p>Once you have installed youtube-dl (as described below for Windows and Linux) you can use chat commands like <code>!yt &lt;url&gt;</code>, <code>!ytdl &lt;url&gt;</code> to play content from any of the supported websites, like YouTube for example.</p> <p>Alternatively you can also download something in your SinusBot web-interface in the \"Upload\" Page, under \"Download Files\". You can also import public playlists from YouTube.</p>"},{"location":"youtube-dl/#windows","title":"Windows","text":"<ul> <li>Install the Microsoft Visual C++ 2010 Redistributable Package (x86) if it isn't installed already</li> <li>Download youtube-dl.exe</li> <li>Save it in the SinusBot directory (same folder the sinusbot.exe is in, for example in <code>C:\\SinusBot\\</code> - depending on where you installed it)</li> <li>Restart the SinusBot (in taskbar right-click =&gt; close, then start again)</li> </ul> <p>The SinusBot should detect it automatically and commands like <code>!yt</code>, <code>!ytdl</code>, etc. should be available.</p>"},{"location":"youtube-dl/#windows-update","title":"Manual Update","text":"<p>Delete the old file and download it again, as described above.</p>"},{"location":"youtube-dl/#windows-troubleshooting","title":"Troubleshooting","text":"<p>If you face an issue, make sure you have the Microsoft Visual C++ 2010 Redistributable Package (x86) installed.</p> <p>You should also try updating youtube-dl by re-downloading it as described above.</p> <p>Try downloading something in your SinusBot web-interface on the \"Upload\" page and check what it shows in the list. \"youtube-dl unavailable\" indicates that youtube-dl is not installed correctly; In that case reinstall it as shown above.</p> <p>For further troubleshooting see the youtube-dl Troubleshooting section for Linux.</p>"},{"location":"youtube-dl/#linux","title":"Linux","text":"<p>Run the following commands but make sure to adjust the paths to match your SinusBot installation:</p> <pre><code>sudo apt-get update\nsudo apt-get install python\ncd /opt/sinusbot/\ncurl -L -O https://yt-dl.org/downloads/latest/youtube-dl\nchmod a+rx youtube-dl\nchown sinusbot:sinusbot youtube-dl\n</code></pre> <p>Afterwards set <code>YoutubeDLPath = \"/opt/sinusbot/youtube-dl\"</code> in your <code>config.ini</code> and restart the SinusBot.</p>"},{"location":"youtube-dl/#automatic-updates","title":"Automatic updates","text":"<p>If you want youtube-dl to be updated automatically you can add a cronjob that does this by executing:</p> <pre><code>echo \"0 0 * * * sinusbot /opt/sinusbot/youtube-dl -U --restrict-filenames &gt;/dev/null\" &gt; /etc/cron.d/ytdl\n</code></pre>"},{"location":"youtube-dl/#linux-update","title":"Manual Update","text":"<p>Either install it again, as described above, or use <code>youtube-dl -U</code>.</p> <pre><code>su sinusbot\nyoutube-dl -U\n</code></pre> <p>Note: Replace <code>youtube-dl</code> with the correct path to your <code>youtube-dl</code> file (i.e. <code>/opt/sinusbot/youtube-dl</code> or <code>/usr/local/bin/youtube-dl</code>).</p>"},{"location":"youtube-dl/#linux-troubleshooting","title":"Troubleshooting","text":"<p>Note: Adjust the paths mentioned here to fit your installation. Replace <code>youtube-dl</code> with the correct path to your <code>youtube-dl</code> file (i.e. <code>/opt/sinusbot/youtube-dl</code> or <code>/usr/local/bin/youtube-dl</code>).</p> <ol> <li> <p>Always make sure that you are using the latest version of youtube-dl (<code>youtube-dl --version</code>). You can upgrade it by running <code>youtube-dl -U</code> (adjust to your own path) - assuming the user you run this with has write permissions.</p> </li> <li> <p>Try downloading something in your SinusBot web-interface on the \"Upload\" page and check what it shows in the list.</p> </li> <li> <p>Try manually downloading something with youtube-dl via the command line. You can do that with <code>youtube-dl -v -i --no-playlist --no-call-home -x &lt;Media URL&gt;</code> The sinusbot usually passes the following flags: <code>-i --no-playlist --no-call-home -J -x</code>.</p> </li> </ol>"},{"location":"youtube-dl/#youtube-dl-unavailable","title":"youtube-dl unavailable","text":"<p>The message \"youtube-dl unavailable\" indicates that youtube-dl is not installed correctly; In that case reinstall it as shown above.</p> <p>Make sure that the <code>YoutubeDLPath</code> in your <code>config.ini</code> is set to the correct path as described above.</p>"},{"location":"youtube-dl/#outdated","title":"Common issues with outdated youtube-dl","text":"<p>If your error message includes one of the following:</p> <ul> <li>Signature extraction failed</li> <li>Download Failed</li> <li>invalid character 'W' looking for beginning of value</li> </ul> <p>Try updating youtube-dl: <code>youtube-dl -U</code></p>"},{"location":"youtube-dl/#error-403","title":"HTTP Error 403: Forbidden","text":"<p>Remove the signature cache:</p> <pre><code>su sinusbot\nyoutube-dl --rm-cache-dir\n</code></pre> <p>and then try again.</p>"},{"location":"youtube-dl/#error-429","title":"HTTP Error 429: Too Many Requests or 402: Payment Required","text":"<p>These two error codes indicate that the service (for example YouTube) is blocking your IP address because of overuse. Usually this is a soft block, meaning that you can gain access again after solving a CAPTCHA. Please read the youtube-dl FAQ section for more details.</p> <p>While this is not a bug, you could at least try the following if you use an IPv6 address:</p> <p>Create the file <code>/etc/youtube-dl.conf</code> with the content <code>--force-ipv4</code> and then try again.  You can do this easily with the following command: <code>echo \"--force-ipv4\" &gt;&gt; /etc/youtube-dl.conf</code></p> <p>If you still receive this error afterwards:</p> <p>This is neither a bug in youtube-dl nor the SinusBot. This error means that YouTube is limiting your IP-address. Unfortunately there is nothing else that you could do other than trying to use a different IP-address.</p> <p>Note: youtube-dl has network options such as <code>--source-address &lt;ip&gt;</code> to select the correct ip-address in case your server has more than one and <code>--proxy &lt;url&gt;</code> that you can use to route requests over another server with a http(s)/socks proxy, however we will not help you with configuring this as it has nothing to do with the SinusBot itself.</p>"},{"location":"youtube-dl/#assuming-restrict-filenames","title":"Assuming --restrict-filenames since file system encoding cannot encode all characters. Set the LC_ALL environment variable to fix this.","text":"<p>This is only a warning, not an error, however you can you can solve it by setting your system locale to something ending in <code>UTF-8</code>.</p> <p>On Debian/Ubuntu you can set your locale with: <code>dpkg-reconfigure locales</code> Select something (use the arrow keys to navigate and Space to select/deselect items) that ends in <code>UTF-8</code>, e.g. <code>en_US.UTF-8</code> and confirm your selection (Tab switches the highlighted button/field and Enter activates it).</p> <p>Afterwards restart your system or your SinusBot to make sure that the changes are applied.</p>"},{"location":"faq/features/","title":"Features","text":""},{"location":"faq/features/#how-can-i-playback-audio-from-3rd-party-sites","title":"How can I playback audio from 3rd party sites?","text":"<p>You can install youtube-dl to playback URLs from every source youtube-dl supports. However, there will be no support for youtube-dl related issues.</p> <p>Some websites don't allow downloading, so make sure you don't use the bot for those sites.</p>"},{"location":"faq/features/#tts","title":"How does Text-to-Speech (TTS) work? I need an URL for that!","text":"<p>Search the forums for some URLs you can use with the bot. Also, see this page for more information.</p>"},{"location":"faq/features/#download-youtube-playlists","title":"Can I download whole playlists from YouTube?","text":"<p>Yes, you can. This requires installing youtube-dl. When creating a new playlist click \"Show advanced options\", then you have the option to enter a URL from which the playlist will be fetched.</p>"},{"location":"faq/features/#sinusbot-api-integration","title":"I want to integrate the bot into my website / remote control the bot via script. How can I do that?","text":"<p>The API documentation of the Bot can be found here. Samples and libraries can be found in the 3rd party forums.</p>"},{"location":"faq/features/#how-can-guests-control-the-bot","title":"How can guests control the bot?","text":"<p>Create a bot user account in your web-interface, edit it afterwards and bind it to the server group ID <code>-1</code> (this will match everyone). Then set the privileges you want the guests to have. The web-interface will however always require a login.</p>"},{"location":"faq/general/","title":"General","text":""},{"location":"faq/general/#more-instances","title":"Can I have more than 2 instances? How do I get a license?","text":"<p>Yes you can! Check out the page about Licenses for more. For the Linux version you don't need a license anymore. The licensing system was removed in v1.0.1.</p>"},{"location":"faq/general/#commercial-use","title":"Where and how to get the hosting version? I want to sell the bot!","text":"<p>The SinusBot software is free for personal use only. If you want to use it commercially, please contact the author.</p> <p>The hosting version is not publicly available. If you are interested in hosting a huge amount of bots (I'm talking 200+ here), feel free to contact @flyth on the forums. The hosting version will not become generally available to everyone anytime soon.</p> <p>Please refrain from messages like \"I'm thinking of starting a business...\", \"I want to sell the bot, but my website is not yet ready\" or such and come back, if you seriously want to apply as a hosting partner and have the proper audience for that. :)</p> <p>There are no licenses for sponsored hosting, yet.</p> <p>However, here are some basic facts of that version: It's capable of running many customer-separated instances on one host (I've seen around 180 on a mediocre server - ~2.x GHz Xeon / 8 Cores, 32G RAM - without any load-saving features enabled - with those features enabled, many more instances would be supported). A provisioning API is available for creating &amp; managing customer instances. There are also some protective features in place that prevent misuse of several client-features (banner spamming and such). Automatic logins can be created from other webinterfaces and the whole frontend API is open, well documented and accessible for further customization / integration. If you're a serious hosting company and want to do some stress testing, please contact me to get a demo-license that will help you do so.</p>"},{"location":"faq/general/#sponsoring","title":"Is sponsoring allowed?","text":"<p>Sponsoring the SinusBot is currently not allowed without prior written permission of the author.</p> <p>Private use (non-commercial and neither profiting directly nor indirectly in any way) such as sharing with your friends is fine of course.</p>"},{"location":"faq/general/#what-is-my-version","title":"Where can I find the version of my SinusBot?","text":"<p>If the bot is already running, open up the web interface and go to Settings &gt; Info &gt; About.</p> <p>If the bot is not running, you can start it with <code>./sinusbot -v</code> on your command line and it will display the version information there.</p>"},{"location":"faq/general/#high-ram-usage","title":"My bot eats a lot of RAM. Why?","text":"<p>The sinusbot itself doesn't use lots of memory but reserves a fair amount. However, this doesn't count as used, so you don't need to worry about it. More details about memory usage on Linux can be found here.</p> <p>The actual TeamSpeak Client instances require more RAM, from which a big part is shared between multiple instances - so again: you probably don't need to worry about it.</p> <p>If you TeamSpeak Server has an big/animated server banner than that will significantly increase RAM usage.</p>"},{"location":"faq/general/#chat-commands","title":"Can I control the bot via chat commands?","text":"<p>Yes, that's possible. The bot knows about several privileges that a user must have to do several kinds of actions. To make the bot recognize a user as a bot user, you can bind an account to a bot account on the Edit user page.</p> <p>All available commands are listed at Settings -&gt; Info -&gt; Commands - including the required privileges to run them. Recent SinusBot versions also have a <code>!help</code> command.</p>"},{"location":"faq/general/#no-chat-commands-response","title":"My Bot doesn't respond to chat commands on Discord. Why?","text":"<p>Check in the Discord Developer Portal whether the Message Content Intent is enabled for your bot. It is required for bots to see the actual message content. Read this for information about the intent.</p>"},{"location":"faq/general/#max-file-size","title":"What's the maximum length/size of music files?","text":"<p>Uploaded files can be limited through the UploadLimit-option in your config.ini (see Configuration). Also note that reverse-proxies can limit the file size too.</p>"},{"location":"faq/general/#arm","title":"Does the bot run on Raspberry PI / PI 2 or similar ARM based systems?","text":"<p>No - there's no ARM based TS client available, so it makes little sense to port the bot.</p>"},{"location":"faq/general/#how-can-i-add-scripts","title":"How can I add scripts?","text":"<p>Download the script you want and copy it to the scripts-folder of the bot. Restart the bot and see the settings -&gt; scripts page to activate it.</p>"},{"location":"faq/general/#where-are-music-files-stored","title":"Where are my music files stored? Can I upload files via FTP?","text":"<p>When you upload files to the bot, they will be analyzed, indexed and stored in the data-directory of the bot. This ensures consistency, fast access and independent metadata as well as some other features like deduplication.</p> <p>If you want to use FTP to manage your files, you can use the <code>ExternalFileBase</code> setting in your config.ini to point to a directory where the files are stored. The bot will pick them up automatically.</p>"},{"location":"faq/general/#macos","title":"Will there be a macOS Version?","text":"<p>Probably not directly, sorry.</p> <p>As a workaround you can currently use the Docker image, but that requires knowledge of Docker and the command line.</p>"},{"location":"faq/general/#why-are-you-guys-so-rude","title":"Why are you guys so rude?","text":"<p>It sounds like you got an answer you didn't like or think we haven't treated you the way you expect us to. Usually the staff and the community is really nice. We usually answer to whatever questions you have and we are very patient - even if you're a newbie.</p> <p>Still, people answer in their spare time and get asked some questions over and over again, even if they have been answered well in the FAQ or on the forums in general. That really gets annoying fast. And because you just didn't search the FAQ or forums before asking on the chat or in a new thread, or posted a thread in caps only (and maybe with the words \"FAST!\", \"ASAP!\" or such), you're basically saying that you think your time is worth more than the time of the people you ask. And that is way more rude than just a short unfriendly answer. So please keep that in mind.</p> <p>If you are such a user: next time, use the search functionality before you ask something. Read the \"READ ME BEFORE YOU POST\" threads (yes, they're in caps for that reason!) as well.</p> <p>If you did some research before asking, please tell people that / what you did. If people are still being rude, there have probably been other users just before you asked your question, who didn't do research before. So please be a little patient in such cases and ask kindly again.</p> <p>Last but not least: the users of this forum speak many different languages, many of them are not native English or German speakers. Politeness can get lost in translation really fast as can messages be interpreted as \"rude\" even if they're not meant to be. Calm down and try to do your best in understanding each other in such cases :)</p>"},{"location":"faq/general/#support-policy","title":"Support Policy / Support Grundregeln","text":"English <p>In the past we got tons of support requests in case of the user is using an old and no longer supported version (How to check my Bot Version?) of our software. We don't want this any more... So of course we need some rules!</p> <ul> <li>Make sure you use an up to date version of:<ul> <li>Linux (Ubuntu 18.04+, Debian 9+, CentOS 7+ or better)</li> <li>Windows (10, Server 2012 or better), with all latest Updates / Service Packs</li> </ul> </li> <li>Make sure you have the latest SinusBot version</li> <li> <p>Make sure you use a valid license for Teamspeak / a valid hosting provider with legal licenses.</p> </li> <li> <p>We want to support more operating systems, but we can't test everything so if you wan't to try the bot on an not-listed platform you can try it. But you should have the knowledge of the platform!</p> </li> <li>We respect Teamspeak, so we will not support invalid or illegal servers no matter what areas.</li> </ul> <p>Before posting: READ THIS FIRST. Thanks!</p> <p>Every topic and private message which is violating this rule will be ignored/deleted.</p> Deutsch <p>In der Vergangenheit haben wir massenhaft Support-Anfragen erhalten, wenn der Benutzer eine alte oder nicht mehr unterst\u00fctzte Version unserer Software verwendet (Wie kann ich meine Bot Version pr\u00fcfen?). Wir wollen das nicht mehr ... Daher brauchen wir Regeln!</p> <ul> <li>Stelle sicher, dass du eine aktuelle Betriebssystem Version verwendest:<ul> <li>Linux (Ubuntu 18.04+, Debian 9+, CentOS 7+ oder besser)</li> <li>Windows (10, Server 2012 oder besser), mit allen Updates / Service Packs</li> </ul> </li> <li>Stelle sicher, dass du die aktuellste SinusBot Version hast</li> <li> <p>Stelle sicher das du eine g\u00fcltige Teamspeak Lizenz verwendest, bzw dein Teamspeak Hoster sich an die Teamspeak Richtlinien h\u00e4lt.</p> </li> <li> <p>Wir wollen mehr Betriebssysteme unterst\u00fctzen, aber wir k\u00f6nnen nicht alles testen, wenn man den bot auf einer nicht- gelisteten Plattform ausprobieren m\u00f6chte kann man das tun. Doch du solltest das Wissen \u00fcber die Plattform haben!</p> </li> <li>Wir Respektieren Teamspeak, daher werden wir ung\u00fcltige oder Illegale Server nicht Supporten egal in welchen bereichen.</li> </ul> <p>Befor du etwas postest: LIES MICH. Danke!</p> <p>Jedes Thema und jede private Nachricht, die gegen diese Regel verst\u00f6\u00dft, wird ignoriert/gel\u00f6scht.</p>"},{"location":"faq/installation/","title":"Installation","text":""},{"location":"faq/installation/#when-will-feature-x-be-implemented","title":"When will feature X be implemented?","text":"<p>There will be no ETA (estimated time of arrival) on any feature. It\u2019s done when it\u2019s done, please don\u2019t ask.</p>"},{"location":"faq/installation/#what-is-the-default-username-and-password","title":"What is the default username and password?","text":"<p>The default username is <code>admin</code>.</p> Windows <p>Double click the SinusBot logo in the tray (next to your clock at the bottom right of the screen) to login. If you need credentials to login from another system, edit the user account or create a new one and set a new password.</p> Linux <p>The bot will initially have a randomly generated password which is displayed on first run in the console. The sinusbot installer will also print the password at the end of the installation.</p> <p>Unexperienced users should use the sinusbot-installer script to reset the password.</p> <p>More experienced users can temprorarily override the password and change it by folling these steps:</p> <ol> <li>Stop the sinusbot (ie. <code>systemctl stop sinusbot</code>)</li> <li>Start the sinusbot with the <code>--override-password=newpassword</code> flag as the sinusbot user:<ul> <li>login as the sinusbot user: <code>su sinusbot</code></li> <li>go to the sinusbot directory: <code>cd /opt/sinusbot</code></li> <li>start the sinusbot: <code>./sinusbot --override-password=newpassword</code> (don't do this as root!)</li> </ul> </li> <li>Login as <code>admin</code> with the specified password (ie. <code>newpassword</code>) and change your password to a new one.</li> <li>Stop the sinusbot: Ctrl+C</li> <li>Afterwards restart the sinusbot without the <code>--override-password</code> parameter. (ie. <code>systemctl start sinusbot</code>)</li> </ol> <p>If the sinusbot doesn't start afterwards and you get something like</p> <pre><code>Job for sinusbot.service failed because the control process exited with error code.\nSee \"systemctl status sinusbot.service\" and \"journalctl -xe\" for details.\n</code></pre> <p>then you did something wrong, such as: starting the bot as root or not stopping the bot, ...</p> <p>Look at the sinusbot log (as it says) with <code>journalctl -xe</code> and search for a solution on this FAQ page or in the forum.</p>"},{"location":"faq/installation/#ports-and-ips","title":"What Ports and IP Ranges are used?","text":"<p>The SinusBot requires an internet connection and contacts our update servers on each start. As the update servers make use of use cloudflare, access to cloudflares IP ranges is required.</p> <p>The TeamSpeak 3 client makes outgoing connections to the TeamSpeak server that you configure. The default ports are listed here (ie. <code>9987 (UDP)</code>, <code>30033 (TCP)</code>, ...).</p> <p>Finally, the SinusBot webinterface listens for incoming HTTP requests on port <code>8087 (TCP)</code> by default. The address and port can be changed in the config by setting <code>ListenHost</code> and <code>ListenPort</code>. Make sure to allow incoming TCP requests to this port in your firewall.</p>"},{"location":"faq/installation/#32bit","title":"Is there a version for 32bit Windows / Linux?","text":"<p>No, there isn\u2019t and there probably won't be one as that would mean much more maintenance work for not that many users.</p>"},{"location":"faq/installation/#elf-not-found","title":"I get some message like \"ELF: not found\" on Linux when trying to start the bot. WTF?","text":"<p>You are trying to run the bot on a 32bit OS. Upgrade your system to 64bit to make the bot work (see above: there is no 32bit version).</p>"},{"location":"faq/installation/#distro-support","title":"Do you support CentOS, Fedora, (name your distro)\u2026?","text":"<p>Probably. I\u2019ve heard of people running the bot on ArchLinux, CentOS, Fedora and others. Rule of thumb is: if the TS3 Client can run there, the bot usually can as well. However, these distributions have not been officially tested and there\u2019s no documentation available.</p> <p>We provide documentation and support for the latest LTS releases of Debian and Ubuntu.</p>"},{"location":"faq/installation/#ssl-errors-on-download","title":"When trying to download the bot, I get errors about SSL. Why and how to fix that?","text":"<p>The whole website now runs on SSL which is far more secure when it comes to software you want to install on your server. However, some linux distributions only have outdated root certificates and those of cloudflare are missing. You can try to upate them via <code>sudo update-ca-certificates</code> on debian/ubuntu.</p> <p>Otherwise, you can try to use <code>curl -O https://...</code></p>"},{"location":"faq/installation/#ts-client-quit","title":"When I start the bot from the webinterface, it doesn\u2019t work. It says something about \u201cTSClient quit.\u201d in the log","text":"<p>This can have many reasons. It means that the TeamSpeak client is unable to run or connect to the destination server. You either have not enough free memory, dependencies for the client are missing, or or or. Please search the forum and post your problem along with the log if you cannot find an issue similar to yours.</p> <p>Here's a quick checklist:</p> <ul> <li>does your server have enough RAM? (at least 300 MB are recommended)</li> <li>did you follow the installation guide thoroughly and installed all required dependencies?</li> <li>do you run the bot on an officially supported OS? Windows, Debian, Ubuntu are officially supported.</li> <li>did you try setting the locale manually like it says in the \"Troubleshooting\" section of the installation guide?</li> <li>did you copy the plugin like it says in the documentation?</li> <li>make sure the server ip/adress is correct</li> <li>make sure your client is up to date since older versions might be blocked</li> <li>make sure the security level is lower or equal to the clients identity level</li> </ul>"},{"location":"faq/installation/#lags-on-windows","title":"My bot stutters / lags a lot on Windows. What can I do?","text":"<p>Increase the bots\u2019 priority and also that of the client instances it uses. You can do that within the task manager. You can also try to decrease the setting SampleInterval, adjusting it to <code>SampleInterval = 40</code> in your config.ini.</p>"},{"location":"faq/installation/#fix-file-permissions","title":"Someone told me to fix the file permissions. How do I do that?","text":"<p>Given your bot has been installed in <code>/opt/sinusbot</code> and you've added a user sinusbot with the group sinusbot as well, run the following command with root permissions:</p> <pre><code>chown -R sinusbot:sinusbot /opt/sinusbot\n</code></pre>"},{"location":"faq/installation/#missing-locales","title":"I get an error like \"what(): locale::facet::_S_create_c_locale name not valid\". What do I do?","text":"<p>Example Error:</p> <pre><code>terminate called after throwing an instance of 'std::runtime_error'\nwhat(): locale::facet::_S_create_c_locale name not valid\n</code></pre> <p>On some minimal installs of Debian or other distributions, the locales are not completely installed / built. This error can be corrected as follow (run as root):</p> <p>Debian:</p> <pre><code>apt-get install locales\ndpkg-reconfigure locales\n</code></pre> <p>Ubuntu:</p> <pre><code>apt-get install locales\nlocale-gen en_US.UTF-8\nupdate-locale LANG=en_US.UTF-8\nreboot\n</code></pre>"},{"location":"faq/installation/#database-errors","title":"I get an error when starting: Updating database to v7... 6 / Error on database operations: there is already another table or index with this name:","text":"<p>This is a bug in the database upgrade process which happens when you upgrade from &lt;= 0.9.9 to a newer version, go back to &lt;= 0.9.9 and then try to upgrade again (or more likely: when starting the bot via ./ts3bot, even when the newer version ./sinusbot is installed).</p> <p>To get around this, please carefully do the following:</p> <ul> <li>stop the bot process completely</li> <li>edit your config.ini and add <code>Pragma = 7</code> at the top</li> <li>start the bot and wait 2-3 minutes</li> <li>shut down the bot again</li> <li>remove that Pragma entry (this is really important)</li> <li>start the bot normally</li> </ul> <p>That should fix it.</p>"},{"location":"faq/installation/#error-spawning-instancefork-exec","title":"On Windows I get the following error: Error spawning instancefork/exec... WTF?","text":"<p>Most people who see this error have the compatibility mode enabled for either the bot or the TS3 client. Please disable the compatibility mode and try again.</p>"},{"location":"faq/installation/#could-not-open-tmpsinusbotlock-is-sinusbot-already-running","title":"Could not open /tmp/.sinusbot.lock. Is SinusBot already running?","text":"<p>Remove the file with <code>rm /tmp/.sinusbot.lock</code> and make sure not to run the bot as root.</p>"},{"location":"faq/installation/#why-cant-i-run-the-bot-as-root","title":"Why can't I run the bot as root?","text":"<p>Unnecessarily running software with the root user is a potential security risk and is generally considered bad practice.</p> <p>You should always run any program with the least amount of permissions required.</p> <p>So how can I run the bot then?</p> <p>Start the bot with another user or use a startscipt to run the bot. You'll have to change the ownership of the entire folder to the new user.</p>"},{"location":"faq/installation/#what-does-a-manual-update-is-required-mean","title":"What does \"a manual update is required\" mean?","text":"<p>This error message appears when the time of your server is not accurate. To fix this issue set the correct time and configure ntp to keep it synced properly.</p> <p>This might also be caused by old SinusBot versions. Update your SinusBot if necessary.</p>"},{"location":"faq/installation/#what-does-could-not-contact-update-server-mean","title":"What does \"could not contact update server\" mean?","text":"<p>This error message appears when the SinusBot is unable to contact our update servers.</p> <p>Possible causes:</p> <ul> <li>no internet connection or invalid network/dns-resolver configuration</li> <li>cloudflare is showing a captcha page because your IP is marked as shady</li> <li>your IP is blacklisted due to suspected non-private use<ul> <li>You are only allowed to run one SinusBot and commercial/non-private use is not allowed without prior, written consent by the author. If you need more instances then get a license.</li> <li> <ul> <li>your servers IP address</li> <li>output of the curl and  dig commands below</li> </ul> <p>In case you think there was a mistake or you want to ask for a second chance, post in our forum or discord server and include the following information:</p> <p>Please be polite, explain the situation in detail and provide your IP address!  There is no point in lying, if you are not honest then we are not interested in talking to you.</p> </li> </ul> </li> </ul> <p>Please check <code>curl -v --no-keepalive --http1.1 https://update01.sinusbot.com</code>.  If it returns a 404 (<code>&lt; HTTP/1.1 404 Not Found</code>) then cloudflare should not be the issue.  If it returns a 403 (<code>&lt; HTTP/1.1 403</code>) and HTML code with a captcha then cloudflare requires you to solve the captcha because your IP address is not trusted. Before you ask: No, we can't whitelist your IP from cloudflare.</p> <p>To check DNS, use <code>dig A +short update01.sinusbot.com</code>. It should return something in the cloudflare ranges.</p>"},{"location":"installation/discord/","title":"Discord","text":"<ol> <li> <p>Create a new Application at the Discord Developer Portal.</p> </li> <li> <p>Go to \"Bot\" at the sidebar.</p> </li> <li> <p>In the section \"Token\" click on \"Copy\" to copy the token.</p> </li> <li> <p>In the section \"Privileged Gateway Intents\" enable the \"Message Content Intent\".</p> </li> </ol> <p></p> <ol> <li> <p>Paste the token with Ctrl+V into the SinusBot instance creation form.</p> </li> <li> <p>Add the bot to your discord server by creating an OAuth2 link.</p> </li> <li>To generate it, go to \"OAuth2\" at the Discord Developer Portal, click on \"URL Generator\" and select the scope \"bot\".</li> <li>For the permissions, select \"Administrator\" and click on \"Copy\" to copy the URL.</li> <li>Open then the generated URL in your browser.</li> </ol>"},{"location":"installation/docker/","title":"Docker","text":"<p>Detailed instructions on how to install the sinusbot on docker can be found on the GitHub Page. You can also check out the image directly on Docker Hub.</p> <pre><code>docker run -d -p 8087:8087 \\\n-v scripts:/opt/sinusbot/scripts \\\n-v data:/opt/sinusbot/data \\\n--name sinusbot sinusbot/docker\n</code></pre>"},{"location":"installation/increase-security-level/","title":"How to increase TeamSpeak security level","text":"<p>Open your SinusBot web-interface and go to: Settings \u21d2 Instance Settings</p> <p></p> <p>Click in the text filed labeled \"Identity\", Select All Ctrl+A, Copy Ctrl+C</p> <p></p> <p>Open a text editor such as notepad and insert the following:</p> <pre><code>[Identity]\nid=SinusBot Identity identity=\"&lt;IDENTITY_STRING&gt;\"\nnickname=SinusBot\nphonetic_nickname=\n</code></pre> <p>Replace <code>&lt;IDENTITY_STRING&gt;</code> with the identity string you copied (ends with an <code>=</code>).</p> <p>Save the file as <code>sinusbot_identity.ini</code> Ctrl+S (select \"All Files\") on your desktop and close the editor.</p> <p></p> <p>Start your TeamSpeak client and open the \"Identities\" menu Ctrl+I</p> <p></p> <p>Right-click in the \"Local Identities\" field and select \"Import\".</p> <p></p> <p>Select the previously created file <code>sinusbot_identity.ini</code>.</p> <p></p> <p>Click on \"Go Advanced\" if you are still in the \"Basic\" mode.</p> <p></p> <p>Click on \"Improve\", then enter your \"Requested Security Level\" and click on \"Start\".</p> <p></p> <p>When finished click \"Close\" and then right-click in the SinusBot Identity and select \"Export\".</p> <p></p> <p></p> <p>Overwrite the previously created file <code>sinusbot_identity.ini</code>.</p> <p></p> <p>Open the file again and copy the new identity string (ends with an <code>=</code>).</p> <p></p> <p>Stop your SinusBot instance (the button at the top should be orange/red).</p> <p></p> <p>Delete the old identity string Ctrl+A Del and insert the new one Ctrl+V.</p> <p></p> <p>Now click on \"Save changes\" to apply your changes. If you followed these steps correctly the new security level will appear.</p> <p></p> <p>Now you can start your SinusBot instance again.</p>"},{"location":"installation/linux/","title":"Linux","text":""},{"location":"installation/linux/#requirements","title":"Requirements","text":"<p>The TeamSpeak Client 3.3+ requires at least a Linux Kernel of version 3.17 or higher!</p> <p>You can check your Linux Kernel version with <code>uname -a</code>.</p> <p>Make sure that your OS (Operating System) is up-to-date. We recommend recent LTS releases such as Ubuntu 22.04.2 or Debian 12 (bullseye), minimal required versions:</p> <ul> <li>Debian 10+</li> <li>Ubuntu 20.04+</li> <li>CentOS 8+</li> </ul> <p>Note: While it might be possible to use older versions in particular cases, we can only provide support for the above mentioned ones.</p> <p>When choosing a VPS (virtual private server), make sure that it is not based on OpenVZ, because the Linux kernel will be too old. Instead choose a KVM or LXC based VPS with a recent OS.</p> <p>The server should have at least 512MB or 1GB of free RAM. Although the SinusBot itself doesn't require much RAM, the TeamSpeak Client(s) often take up the most memory.</p> <p>Make sure that the server has enough free disk space to fit your needs.</p>"},{"location":"installation/linux/#compatible-versions","title":"Compatible Versions","text":"SinusBot Version TS3 Client Version Linux Kernel Version TeamSpeak Server Version 1.0.2 and later 3.5+ 3.17+ &gt;= 3.8.x 1.0.0-beta3 and later 3.3+ 3.17+ &gt;= 3.8.x 1.0.0-beta2, 1.0.0-beta1 3.2.5 2.6+ &lt;= 3.9.x <p>Discord Support</p> <p>Due to breaking changes with the Discord voice gateway, Discord support is only available with the SinusBot version 1.0.2 and later.</p> <p>Please note that we do not support old beta releases. See Support Policy / Support Grundregeln.</p>"},{"location":"installation/linux/#installer-script","title":"Installer Script","text":"<p>If you are new to Linux and/or wish to have everything installed for you in a more convenient way, we encourage you to use the Installer Script.</p>"},{"location":"installation/linux/#manual-installation","title":"Manual installation","text":"<p>The TeamSpeak Client 3.3+ requires at least a Linux Kernel of version 3.17 or higher!</p> <p>You can check your Linux Kernel version with <code>uname -a</code>.</p> <p>Let's start by installing several dependencies:</p> <pre><code>apt-get update\napt-get install -y x11vnc xvfb libxcursor1 ca-certificates curl bzip2 libnss3 libegl1-mesa x11-xkb-utils libasound2 libpci3 libxslt1.1 libxkbcommon0 libxss1 libxcomposite1\nupdate-ca-certificates\n</code></pre> <p>On Debian and some Ubuntu versions you might as well have to install, so at least try:</p> <pre><code>apt-get install libglib2.0-0\n</code></pre> <p>In case of Ubuntu 18.04: Depending on the Ubuntu installation the <code>universe</code> repository of Ubuntu is not activated, resulting in missing packages for required dependencies x11vnc and xvfb. When said problem occurs, enable the <code>universe</code> repository by using following command:</p> <pre><code>add-apt-repository universe\napt-get update\n</code></pre> <p>After all required dependencies are installed, let's assume that you're going to install the bot to <code>/opt/sinusbot</code> and are using the user <code>sinusbot</code> with the group <code>sinusbot</code>. We will install the bot with root then switch to this user account when running the bot.</p> <p>You will need to create an new user <code>sinusbot</code> on your server, so to do so type the following command.</p> <pre><code>adduser --disabled-login sinusbot\n</code></pre> <p>This created user is used to start the bot with usual user privileges (which is highly recommended!), as the bot should not run as root for security-reasons.</p> <p>Next we will create and prepare the folder where Sinusbot will be installed to, by issuing following commands as the root user:</p> <pre><code># create folder\nmkdir -p /opt/sinusbot\n# grant sinusbot user permissions on specified folder\nchown -R sinusbot:sinusbot /opt/sinusbot\n</code></pre> <p>(If you're using another user/group than \"sinusbot\", replace sinusbot:sinusbot with yourusername:yourusergroup)</p> <p>Then we will switch over to the recently created user dedicated for the sinusbot, change the working directory and to download the latest Sinusbot release:</p> <pre><code>su sinusbot\ncd /opt/sinusbot\nwget https://www.sinusbot.com/dl/sinusbot.current.tar.bz2\n</code></pre> <p>If that command results in SSL-Errors, you can alternatively try</p> <pre><code>curl -O https://www.sinusbot.com/dl/sinusbot.current.tar.bz2\n</code></pre> <p>Next, extract the bot:</p> <pre><code>tar -xjf sinusbot.current.tar.bz2\n</code></pre> <p>Copy the configuration (if you haven't started the bot before)</p> <pre><code>cp config.ini.dist config.ini\n</code></pre> <p>Now you need to download the TeamSpeak 3 Client and install it.</p> <pre><code># set the current/supported TS3 version here\nVERSION=\"3.5.6\"\nwget https://files.teamspeak-services.com/releases/client/$VERSION/TeamSpeak3-Client-linux_amd64-$VERSION.run\nchmod 0755 TeamSpeak3-Client-linux_amd64-$VERSION.run\n./TeamSpeak3-Client-linux_amd64-$VERSION.run\n</code></pre> <p>You will need to accept the terms by pressing: Enter, Q, Y, Enter.</p> <p>Afterwards you can delete the file: <code>rm TeamSpeak3-Client-linux_amd64-$VERSION.run</code></p> <p>Now you need to configure the ini-File of the bot to match your directories.</p> <pre><code>nano config.ini\n</code></pre> <p>Make sure that the TS3Path is correct (if you followed this tutorial step by step, it should already match):</p> <pre><code>TS3Path = \"/opt/sinusbot/TeamSpeak3-Client-linux_amd64/ts3client_linux_amd64\"\n</code></pre> <p>Close the editor (Ctrl+O, Enter, Ctrl+X).</p> <p>Remove the file 'libqxcb-glx-integration.so' from the clients 'xcbglintegrations' directory:</p> <pre><code>rm TeamSpeak3-Client-linux_amd64/xcbglintegrations/libqxcb-glx-integration.so\n</code></pre> <p>Create the plugins folder in the ts3client directory:</p> <pre><code>mkdir TeamSpeak3-Client-linux_amd64/plugins\n</code></pre> <p>And finally copy the plugin to the plugins-directory of the TeamSpeak-Installation</p> <pre><code>cp plugin/libsoundbot_plugin.so TeamSpeak3-Client-linux_amd64/plugins/\n</code></pre> <p>Just to make sure that the bot is executable, enter</p> <pre><code>chmod 755 sinusbot\n</code></pre> <p>(optional) To enable playback support for YouTube URLs and several other sites, we recommend installing youtube-dl.</p>"},{"location":"installation/linux/#usage","title":"Usage","text":"<p>As the bot won't run as root you will need to switch to the user that you have installed the bot on, if you followed the tutorial, this will be 'sinusbot\". To do this use the following command:</p> <pre><code>su sinusbot\n</code></pre> <p>Starting the bot</p> <pre><code>./sinusbot\n</code></pre> <p>Stopping the bot with Ctrl+C</p> <p>If you want to keep the bot running when you exit out of the terminal follow the instruction on how to install a startscript.</p> <p>Now login at <code>http://&lt;your ip&gt;:8087/</code> with user admin and the password provided on first run. (see FAQ on how to reset)</p>"},{"location":"installation/linux/#using-a-startscript","title":"Using a startscript","text":"<p>These instructions need to be done as the <code>root</code> user.</p> <p>Download the startscript:</p> <pre><code>curl -o /lib/systemd/system/sinusbot.service https://raw.githubusercontent.com/SinusBot/linux-startscript/master/sinusbot.service\n</code></pre> <p>Then edit the file:</p> <pre><code>nano /lib/systemd/system/sinusbot.service\n</code></pre> <p>And replace the following placeholders to match your installation:</p> placeholder description example YOUR_USER Your user who starts the bot sinusbot YOURPATH_TO_THE_BOT_BINARY Your path to the SinusBot binary /opt/sinusbot/sinusbot YOURPATH_TO_THE_BOT Your path to the SinusBot install directory /opt/sinusbot <p>Reload systemd: <code>systemctl daemon-reload</code></p> <p>Enable autostart (optional): <code>systemctl enable sinusbot</code></p> <p>Start the sinusbot: <code>systemctl start sinusbot</code></p> <p>Troubleshooting:</p> <ul> <li>This requires you to have systemd as default; You can check this with <code>grep \"Name\" /proc/1/status</code> - It should return: <code>Name: systemd</code>. If you do not have systemd, install systemd and then set systemd as default.</li> <li>To see the log and check for errors you can use <code>systemctl status sinusbot</code> and <code>journalctl -u sinusbot -f</code>.</li> </ul>"},{"location":"installation/linux/#update","title":"Update","text":""},{"location":"installation/linux/#update-the-sinusbot","title":"Update the SinusBot","text":"<p>Note: The following instructions assume that you've followed this guide - otherwise you might need to slightly adapt the commands to fit your installation.</p> <p>Before continuing you should install the dependencies mentioned at the beginning of the \"Manual installation\" section.</p> <p>The update process is the same as the installation, we simply download and unpack the new SinusBot version over the old one.</p> <p>First stop your sinusbot (e.g. <code>systemctl stop sinusbot</code> if you use the systemd-startscript) and then run the following commands:</p> <pre><code># go into the sinusbot directory\ncd /opt/sinusbot\n# download the current release\nwget https://www.sinusbot.com/dl/sinusbot.current.tar.bz2\n# unpack it\ntar -xjvf sinusbot.current.tar.bz2\n# copy the plugin\ncp plugin/libsoundbot_plugin.so TeamSpeak3-Client-linux_amd64/plugins/\n# fix the file permissions if you're doing this as root\nchown -R sinusbot:sinusbot /opt/sinusbot\n</code></pre> <p>Afterwards, start the SinusBot again (e.g. <code>systemctl start sinusbot</code>)</p> <p>Note: When updating the SinusBot, you should also Update the TeamSpeak Client.</p>"},{"location":"installation/linux/#update-the-teamspeak-client","title":"Update the TeamSpeak Client","text":"<p>Before continuing you should install the dependencies mentioned at the beginning of the \"Manual installation\" section.</p> <p>The update process is the same as the installation, we simply download and unpack the new TeamSpeak Client over the old one.</p> <p>First stop your sinusbot (e.g. <code>systemctl stop sinusbot</code> if you use the systemd-startscript) and then run the following commands:</p> <pre><code># go into the sinusbot directory\ncd /opt/sinusbot\n\n# set the current/supported TS3 version here\nVERSION=\"3.5.3\"\nwget https://files.teamspeak-services.com/releases/client/$VERSION/TeamSpeak3-Client-linux_amd64-$VERSION.run\nchmod 0755 TeamSpeak3-Client-linux_amd64-$VERSION.run\n./TeamSpeak3-Client-linux_amd64-$VERSION.run\n</code></pre> <p>You will need to accept the terms by pressing: Enter, Q, Y, Enter.</p> <p>Afterwards you can delete the file: <code>rm TeamSpeak3-Client-linux_amd64-$VERSION.run</code></p> <p>Now remove the <code>data/ts3</code> directory and the <code>libqxcb-glx-integration.so</code> file as well:</p> <pre><code>rm -rf data/ts3\nrm TeamSpeak3-Client-linux_amd64/xcbglintegrations/libqxcb-glx-integration.so\n</code></pre> <p>And finally copy the plugin to the plugins-directory of the TeamSpeak-Installation</p> <pre><code>cp plugin/libsoundbot_plugin.so TeamSpeak3-Client-linux_amd64/plugins/\n# fix the file permissions if you're doing this as root\nchown -R sinusbot:sinusbot /opt/sinusbot\n</code></pre> <p>Afterwards, start the SinusBot again (e.g. <code>systemctl start sinusbot</code>)</p>"},{"location":"installation/linux/#migrating-to-another-system","title":"Migrating to another System","text":"<p>First, install the SinusBot on the new system according to our guides. Afterwards, copy over the <code>data</code>-folder, <code>scripts</code>-folder, <code>config.ini</code> and <code>private.dat</code> from your old SinusBot installation folder (typically <code>/opt/sinusbot/</code> on Linux).</p> <p>Depending on how you copied the files, you might need to fix your file permissions afterwards.</p> <p>When finished, stop the SinusBot on the old system (e.g.<code>systemctl stop sinusbot</code>) and (re)start the SinusBot on the new system (e.g.<code>systemctl restart sinusbot</code>).</p>"},{"location":"installation/linux/#troubleshooting","title":"Troubleshooting","text":"<p>Look for any errors in the sinusbot/instance log and try to look-up solutions on our forum or your favorite search engine.</p> <p>If you ask us or our community for help then please provide the output of the diag script and follow everything that is mentioned in READ ME BEFORE YOU POST.</p> <p>If you use the systemd-startscript you can check the status with <code>systemctl status sinusbot</code>. Logs can be viewed using <code>journalctl -u sinusbot -f --since \"2 hours ago\"</code>.</p> <p>The SinusBot itself is closed-source, but some of the resources are open-source and available in the SinusBot GitHub Organization - contributions welcome.</p> <ul> <li>Documentation</li> <li>Scripting Documentation</li> <li>Linux-Installer</li> <li>Startscript</li> <li>Default SinusBot Scripts</li> <li>SinusBot Docker Image</li> <li>and more!</li> </ul>"},{"location":"installation/windows/","title":"Windows","text":"<ol> <li> <p>Download and install the latest 64-Bit TeamSpeak 3 Client for Windows.</p> </li> <li> <p>Download the SinusBot Installer for Windows and start it.</p> </li> <li> <p>Optionally you can install youtube-dl afterwards to allow you to play media from YouTube and other supported sites</p> </li> </ol> <p>Be sure that \"TeamSpeak 3 Support\" is checked, as shown in the following picture:</p> <p></p> <p>If the option is not available then the installer could not find a compatible TeamSpeak Client (see step 1). If you continue installation without this checkbox enabled the SinusBot will only be able to connect to Discord.</p> <p>To Log in Double click the SinusBot logo in the tray (next to your clock at the bottom right of the screen) to login.</p>"},{"location":"installation/windows/#troubleshooting","title":"Troubleshooting","text":"<p>Look for any errors in the SinusBot/instance log and try to look-up solutions on our forum or your favorite search engine.</p> <p>If you ask us or our community for help then please provide all of the information mentioned in READ ME BEFORE YOU POST.</p>"},{"location":"installation/windows/#i-can-only-connect-the-sinusbot-to-discord-how-can-i-fix-it","title":"I can only connect the SinusBot to Discord, how can I fix it?","text":"<p>As mentioned above: \"TeamSpeak 3 Support\" needs to be enabled when installing the SinusBot. To fix this you need to:</p> <ol> <li>Delete the SinusBot</li> <li>Uninstall old or otherwise incompatible TeamSpeak Clients.</li> <li>Install a compatible (latest version, 64-Bit) TeamSpeak Client</li> <li>Reinstall the SinusBot as described above</li> </ol> <p>If that's still not working then make sure to uninstall any old and 32-Bit TeamSpeak Clients and reinstall the latest 64-Bit TeamSpeak Client in the default location.</p>"},{"location":"installation/windows/#bot-muted-after-disconnecting-from-remote-desktop","title":"bot muted after disconnecting from remote desktop","text":"<p>The Bot mutes itself after I disconnect from remote desktop. Why? How do I fix it?</p> <p>That's the fault of the TeamSpeak Client, see this post from a TeamSpeak Developer.</p> <p>There are a few threads about this on our forum:</p> <ul> <li>[ENG] forum.sinusbot.com/threads/5521/#post-32460</li> <li>[ENG] forum.sinusbot.com/threads/2496/</li> <li>[GER] forum.sinusbot.com/threads/6498/#post-36130</li> <li>[GER] forum.sinusbot.com/threads/5289/</li> </ul> <p>There is no official support from TeamSpeak to disable this behavior but there is a workaround as described in this post (in german):</p> <p>They've solved this by installing the TS3 plugin \"Session Lock Actions\" and changing the settings as shown below (set to \"ticked\" checkbox, not \"filled\").</p> <p></p>"},{"location":"reverse-proxy/apache2/","title":"Apache 2","text":"<p>If you want to serve the web interface of the SinusBot encrypted or with the rest of your website, you usually want to setup a reverse proxy. Most of the time, you already have a web server (like apache2 or nginx) in place, which you can use to forward the incoming traffic to the SinusBot.</p> <p>First you need to add a DNS record (A) which is pointing from your subdomain (e.g. sinusbot.example.com) to the IP of your server. After that, create a file at <code>/etc/apache2/sites-available/sinusbot.conf</code> with the following content.</p> <p>Adjust the value of the following variables in the configuration examples below:</p> <ul> <li><code>YOUR_DOMAIN</code> (domain of your sinusbot)</li> <li><code>ProxyPass</code> and <code>ProxyPassReverse</code> (port of your sinusbot)</li> <li><code>SSLCertificate*</code> (SSL only!)</li> </ul> <p>If you are using no SSL (http):</p> <pre><code>&lt;VirtualHost *:80&gt;\nServerName YOUR_DOMAIN\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    ProxyPreserveHost On\n\nProxyPass / http://127.0.0.1:8087/\n    ProxyPassReverse / http://127.0.0.1:8087/\n&lt;/VirtualHost&gt;\n</code></pre> <p>If you are using SSL (https) with http-&gt;https redirect:</p> <pre><code>&lt;VirtualHost *:80&gt;\nServerName YOUR_DOMAIN\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    RewriteEngine on\nRewriteCond %{SERVER_NAME}=YOUR_DOMAIN\n    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:443&gt;\nServerName YOUR_DOMAIN\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    SSLEngine On\nSSLCertificateFile    /etc/letsencrypt/live/YOUR_DOMAIN/cert.pem\nSSLCertificateKeyFile /etc/letsencrypt/live/YOUR_DOMAIN/privkey.pem\nSSLCertificateChainFile /etc/letsencrypt/live/your_domain/fullchain.pem\n\nProxyPreserveHost On\nProxyPass / http://127.0.0.1:8087/\n    ProxyPassReverse / http://127.0.0.1:8087/\n\n    Include /etc/letsencrypt/options-ssl-apache.conf\n&lt;/VirtualHost&gt;\n</code></pre> <p>This example uses Let's Encrypt to generate the SSL certificate. If you are using a different certificate, you need to adjust the <code>SSLCertificate*</code> variables and remove the <code>Include</code> line.</p> <p>Afterwards you need to enable the configuration file:</p> <p><code>a2ensite sinusbot</code></p> <p>Enable the proxy-module:</p> <p><code>a2enmod proxy</code></p> <p>Enable the http-proxy-module:</p> <p><code>a2enmod proxy_http</code></p> <p>Enable the SSL-module</p> <p><code>a2enmod ssl</code></p> <p>Enable the rewrite-module:</p> <p><code>a2enmod rewrite</code></p> <p>Restart apache2:</p> <p><code>systemctl restart apache2</code></p> <p>Now just follow the common adaptations for reverse proxies.</p>"},{"location":"reverse-proxy/common-adaptations/","title":"Common Adaptations","text":"<p>It's recommend to modify the sinusbot's <code>config.ini</code>:</p> <ul> <li>Set the <code>ListenHost</code> to <code>localhost</code> or <code>127.0.0.1</code> as the SinusBot is now only meant to be accessed via the reverse proxy.</li> <li>Set <code>IsProxied</code> to <code>true</code> so that the SinusBot knows that the web-interface is behind a reverse proxy and will handle the IPs correctly.</li> <li>Set the <code>Hostname</code> to your public domain you've set up.</li> </ul>"},{"location":"reverse-proxy/nginx/","title":"NGINX","text":"<p>If you want to serve the web interface of the SinusBot encrypted or with the rest of your website, you usually want to setup a reverse proxy. Most of the time, you already have a web server (like Apache2 or nginx) in place, which you can use to forward the incoming traffic to the SinusBot.</p> <p>First you need to add a DNS record (for example an A-record) that points from your subdomain (e.g. sinusbot) to the IP of your server.</p> <p>After that, create a file at <code>/etc/nginx/sites-available/sinusbot.conf</code> with the following content.</p> <p>You need to adjust the value of the following variables in the configuration examples below:</p> <ul> <li><code>YOUR_DOMAIN</code> (domain of your sinusbot)</li> <li><code>proxy_pass</code> (local address of your sinusbot)</li> <li><code>ssl_certificate</code> (SSL only)</li> <li><code>ssl_certificate_key</code> (SSL only)</li> </ul> <p>If you are using no SSL (http):</p> <pre><code>server {\nlisten 80;\nlisten [::]:80;\n\n# Set your domain here:\nserver_name YOUR_DOMAIN;\n\naccess_log  /var/log/nginx/sinusbot.access.log;\nerror_log   /var/log/nginx/sinusbot.error.log;\n\nlocation / {\nproxy_pass http://127.0.0.1:8087;\nproxy_set_header X-Forwarded-Host $host:$server_port;\nproxy_set_header X-Forwarded-Server $host;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_buffers 16 16k;\nproxy_buffer_size 16k;\n\n# pass upgrade/connection headers for websockets\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"Upgrade\";\n}\n}\n</code></pre> <p>If you are using SSL (https) with http-&gt;https redirect:</p> <pre><code>server {\nlisten 80;\nlisten [::]:80;\n\n# Set your domain here:\nserver_name YOUR_DOMAIN;\n\naccess_log /var/log/nginx/sinusbot.access.log;\nerror_log  /var/log/nginx/sinusbot.error.log;\n\nreturn 301 https://$host$request_uri;\n}\n\nserver {\nlisten 443 ssl http2;\nlisten [::]:443 ssl http2;\n\n# Set your domain here:\nserver_name YOUR_DOMAIN;\n\naccess_log /var/log/nginx/sinusbot.access.log;\nerror_log  /var/log/nginx/sinusbot.error.log;\n\n# Set the path to your ssl cert here:\nssl on;\nssl_certificate     /etc/letsencrypt/live/YOUR_DOMAIN/fullchain.pem;\nssl_certificate_key /etc/letsencrypt/live/YOUR_DOMAIN/privkey.pem;\n\nlocation / {\nproxy_pass http://127.0.0.1:8087;\nproxy_set_header X-Forwarded-Host $host:$server_port;\nproxy_set_header X-Forwarded-Server $host;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_buffers 16 16k;\nproxy_buffer_size 16k;\n\n# pass upgrade/connection headers for websockets\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"Upgrade\";\n}\n}\n</code></pre> <p>This example uses Let's Encrypt to generate the SSL certificate. If you are using a different certificate, you need to adjust the <code>ssl_certificate*</code> variables .</p> <p>Afterwards you need to link the file to the <code>sites-enabled</code> directory:</p> <p><code>ln -sf /etc/nginx/sites-available/sinusbot.conf /etc/nginx/sites-enabled</code></p> <p>Check for errors:</p> <p><code>nginx -t</code></p> <p>Reload nginx:</p> <p><code>nginx -s reload</code></p> <p>Now just follow the common adaptations for reverse proxies.</p>"}]}